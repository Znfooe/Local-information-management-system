import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/pages/AiAgent.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=35fb60bd"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
var _s = $RefreshSig$();
import __vite__cjsImport1_react from "/node_modules/.vite/deps/react.js?v=35fb60bd"; const useState = __vite__cjsImport1_react["useState"]; const useRef = __vite__cjsImport1_react["useRef"]; const useEffect = __vite__cjsImport1_react["useEffect"];
import { useTranslation } from "/node_modules/.vite/deps/react-i18next.js?v=35fb60bd";
import { toast } from "/node_modules/.vite/deps/sonner.js?v=35fb60bd";
import { Button } from "/src/components/ui/button.tsx";
import { Input } from "/src/components/ui/input.tsx";
import { ScrollArea } from "/src/components/ui/scroll-area.tsx";
import { Card } from "/src/components/ui/card.tsx";
import { Send, Bot, User, Settings2, History, Plus, MessageSquare, Trash2 } from "/node_modules/.vite/deps/lucide-react.js?v=35fb60bd";
import axios from "/node_modules/.vite/deps/axios.js?v=35fb60bd";
import { db } from "/src/lib/db.ts";
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
  DialogDescription
} from "/src/components/ui/dialog.tsx";
import { Label } from "/src/components/ui/label.tsx";
import { Textarea } from "/src/components/ui/textarea.tsx";
export default function AiAgent() {
  _s();
  const { t } = useTranslation();
  const [messages, setMessages] = useState([]);
  const [input, setInput] = useState("");
  const [isLoading, setIsLoading] = useState(false);
  const scrollRef = useRef(null);
  const [sessions, setSessions] = useState([]);
  const [sessionId, setSessionId] = useState("");
  const [isHistoryOpen, setIsHistoryOpen] = useState(false);
  const [systemPrompt, setSystemPrompt] = useState("你是一个乐于助人的AI助手。");
  const [apiKey, setApiKey] = useState("12b3cf51ba064a46b68ecc6bbd5b31ec.kwa9yPoUIxDxJ16J");
  const [model, setModel] = useState("glm-4-flash");
  useEffect(() => {
    const init = async () => {
      const settings = await db.getSettings();
      if (settings.apiKey) setApiKey(settings.apiKey);
      if (settings.model) setModel(settings.model);
      if (settings.systemPrompt) setSystemPrompt(settings.systemPrompt);
      const loadedSessions = await db.getSessions();
      if (loadedSessions && loadedSessions.length > 0) {
        loadedSessions.sort((a, b) => b.updatedAt - a.updatedAt);
        setSessions(loadedSessions);
        setSessionId(loadedSessions[0].id);
        setMessages(loadedSessions[0].messages);
      } else {
        const history = await db.getChatHistory();
        if (history && history.length > 0) {
          const newId = Date.now().toString();
          const newSession = {
            id: newId,
            title: history[0].content.slice(0, 20) || t("ai.recovered"),
            messages: history,
            updatedAt: Date.now()
          };
          await db.saveSession(newSession);
          setSessions([newSession]);
          setSessionId(newId);
          setMessages(history);
        } else {
          handleNewChat();
        }
      }
    };
    init();
  }, []);
  useEffect(() => {
    if (!sessionId || messages.length === 0) return;
    const save = async () => {
      const currentSession = sessions.find((s) => s.id === sessionId);
      let title = currentSession?.title || "New Chat";
      if (title === "New Chat") {
        const firstUserMsg = messages.find((m) => m.role === "user");
        if (firstUserMsg) {
          title = firstUserMsg.content.slice(0, 15);
        }
      }
      const updatedSession = {
        id: sessionId,
        title,
        messages,
        updatedAt: Date.now()
      };
      await db.saveSession(updatedSession);
      setSessions((prev) => {
        const idx = prev.findIndex((s) => s.id === sessionId);
        if (idx >= 0) {
          const newSessions = [...prev];
          newSessions[idx] = updatedSession;
          return newSessions.sort((a, b) => b.updatedAt - a.updatedAt);
        }
        return [updatedSession, ...prev];
      });
    };
    save();
  }, [messages]);
  const handleNewChat = async () => {
    const newId = Date.now().toString();
    const newSession = {
      id: newId,
      title: "New Chat",
      messages: [],
      updatedAt: Date.now()
    };
    await db.saveSession(newSession);
    setSessions((prev) => [newSession, ...prev]);
    setSessionId(newId);
    setMessages([]);
    setIsHistoryOpen(false);
  };
  const loadSession = (session) => {
    setSessionId(session.id);
    setMessages(session.messages);
    setIsHistoryOpen(false);
  };
  const handleDeleteSession = async (e, id) => {
    e.stopPropagation();
    if (confirm(t("ai.delete_confirm") || "Are you sure?")) {
      await db.deleteSession(id);
      const newSessions = sessions.filter((s) => s.id !== id);
      setSessions(newSessions);
      if (id === sessionId) {
        if (newSessions.length > 0) {
          loadSession(newSessions[0]);
        } else {
          handleNewChat();
        }
      }
    }
  };
  const saveConfig = async () => {
    if (!apiKey.trim()) {
      toast.error(t("ai.key.empty"));
      return;
    }
    try {
      await db.saveSettings({ apiKey, model, systemPrompt });
      toast.success(t("ai.config.saved"));
    } catch (error) {
      console.error("Save config error:", error);
      toast.error(t("ai.config.failed"));
    }
  };
  useEffect(() => {
    if (scrollRef.current) {
      scrollRef.current.scrollIntoView({ behavior: "smooth" });
    }
  }, [messages]);
  const handleSend = async () => {
    if (!input.trim()) return;
    if (!apiKey) {
      toast.error(t("ai.key.missing"));
      return;
    }
    const userMsg = { role: "user", content: input };
    setMessages((prev) => [...prev, userMsg]);
    setInput("");
    setIsLoading(true);
    try {
      const conversation = [
        { role: "system", content: systemPrompt },
        ...messages,
        userMsg
      ];
      const response = await axios.post(
        "https://open.bigmodel.cn/api/paas/v4/chat/completions",
        {
          model,
          messages: conversation,
          stream: false
        },
        {
          headers: {
            "Authorization": `Bearer ${apiKey}`,
            "Content-Type": "application/json"
          }
        }
      );
      const aiMsg = {
        role: "assistant",
        content: response.data.choices[0].message.content
      };
      setMessages((prev) => [...prev, aiMsg]);
    } catch (error) {
      console.error("AI Error:", error);
      toast.error(t("ai.request.failed"));
      const errorMsg = {
        role: "assistant",
        content: `Error: ${error.response?.data?.error?.message || error.message}`
      };
      setMessages((prev) => [...prev, errorMsg]);
    } finally {
      setIsLoading(false);
    }
  };
  return /* @__PURE__ */ jsxDEV("div", { className: "flex flex-col h-full space-y-4", children: [
    /* @__PURE__ */ jsxDEV("div", { className: "flex items-center justify-between border-b pb-4", children: [
      /* @__PURE__ */ jsxDEV("h2", { className: "text-2xl font-bold flex items-center gap-2", children: [
        /* @__PURE__ */ jsxDEV(Bot, { className: "h-6 w-6" }, void 0, false, {
          fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
          lineNumber: 243,
          columnNumber: 11
        }, this),
        " ",
        t("nav.ai")
      ] }, void 0, true, {
        fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
        lineNumber: 242,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsxDEV(Button, { variant: "outline", size: "sm", onClick: handleNewChat, children: [
          /* @__PURE__ */ jsxDEV(Plus, { className: "h-4 w-4 mr-2" }, void 0, false, {
            fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
            lineNumber: 248,
            columnNumber: 13
          }, this),
          " ",
          t("ai.new_chat") || "New Chat"
        ] }, void 0, true, {
          fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
          lineNumber: 247,
          columnNumber: 11
        }, this),
        /* @__PURE__ */ jsxDEV(Dialog, { open: isHistoryOpen, onOpenChange: setIsHistoryOpen, children: [
          /* @__PURE__ */ jsxDEV(DialogTrigger, { asChild: true, children: /* @__PURE__ */ jsxDEV(Button, { variant: "outline", size: "sm", children: [
            /* @__PURE__ */ jsxDEV(History, { className: "h-4 w-4 mr-2" }, void 0, false, {
              fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
              lineNumber: 254,
              columnNumber: 17
            }, this),
            " ",
            t("ai.history") || "History"
          ] }, void 0, true, {
            fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
            lineNumber: 253,
            columnNumber: 15
          }, this) }, void 0, false, {
            fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
            lineNumber: 252,
            columnNumber: 13
          }, this),
          /* @__PURE__ */ jsxDEV(DialogContent, { className: "max-w-md max-h-[80vh] flex flex-col", children: [
            /* @__PURE__ */ jsxDEV(DialogHeader, { children: /* @__PURE__ */ jsxDEV(DialogTitle, { children: t("ai.history") || "Chat History" }, void 0, false, {
              fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
              lineNumber: 259,
              columnNumber: 17
            }, this) }, void 0, false, {
              fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
              lineNumber: 258,
              columnNumber: 15
            }, this),
            /* @__PURE__ */ jsxDEV(ScrollArea, { className: "flex-1 pr-4 mt-2", children: /* @__PURE__ */ jsxDEV("div", { className: "space-y-2", children: [
              sessions.map(
                (session) => /* @__PURE__ */ jsxDEV(
                  "div",
                  {
                    onClick: () => loadSession(session),
                    className: `flex items-center justify-between p-3 rounded-lg border cursor-pointer hover:bg-accent transition-colors ${sessionId === session.id ? "bg-accent" : ""}`,
                    children: [
                      /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-3 overflow-hidden", children: [
                        /* @__PURE__ */ jsxDEV(MessageSquare, { className: "h-4 w-4 shrink-0 opacity-70" }, void 0, false, {
                          fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                          lineNumber: 272,
                          columnNumber: 25
                        }, this),
                        /* @__PURE__ */ jsxDEV("div", { className: "flex flex-col overflow-hidden", children: [
                          /* @__PURE__ */ jsxDEV("span", { className: "truncate text-sm font-medium", children: session.title || "Untitled Chat" }, void 0, false, {
                            fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                            lineNumber: 274,
                            columnNumber: 27
                          }, this),
                          /* @__PURE__ */ jsxDEV("span", { className: "text-xs text-muted-foreground font-normal", children: new Date(session.updatedAt).toLocaleString() }, void 0, false, {
                            fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                            lineNumber: 277,
                            columnNumber: 27
                          }, this)
                        ] }, void 0, true, {
                          fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                          lineNumber: 273,
                          columnNumber: 25
                        }, this)
                      ] }, void 0, true, {
                        fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                        lineNumber: 271,
                        columnNumber: 23
                      }, this),
                      /* @__PURE__ */ jsxDEV(
                        Button,
                        {
                          variant: "ghost",
                          size: "icon",
                          className: "h-8 w-8 text-muted-foreground hover:text-destructive shrink-0",
                          onClick: (e) => handleDeleteSession(e, session.id),
                          children: /* @__PURE__ */ jsxDEV(Trash2, { className: "h-4 w-4" }, void 0, false, {
                            fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                            lineNumber: 288,
                            columnNumber: 25
                          }, this)
                        },
                        void 0,
                        false,
                        {
                          fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                          lineNumber: 282,
                          columnNumber: 23
                        },
                        this
                      )
                    ]
                  },
                  session.id,
                  true,
                  {
                    fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                    lineNumber: 264,
                    columnNumber: 19
                  },
                  this
                )
              ),
              sessions.length === 0 && /* @__PURE__ */ jsxDEV("p", { className: "text-center text-muted-foreground text-sm py-8", children: t("ai.no_history") || "No chat history" }, void 0, false, {
                fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                lineNumber: 293,
                columnNumber: 19
              }, this)
            ] }, void 0, true, {
              fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
              lineNumber: 262,
              columnNumber: 17
            }, this) }, void 0, false, {
              fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
              lineNumber: 261,
              columnNumber: 15
            }, this)
          ] }, void 0, true, {
            fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
            lineNumber: 257,
            columnNumber: 13
          }, this)
        ] }, void 0, true, {
          fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
          lineNumber: 251,
          columnNumber: 11
        }, this),
        /* @__PURE__ */ jsxDEV(Dialog, { children: [
          /* @__PURE__ */ jsxDEV(DialogTrigger, { asChild: true, children: /* @__PURE__ */ jsxDEV(Button, { variant: "outline", size: "sm", children: [
            /* @__PURE__ */ jsxDEV(Settings2, { className: "h-4 w-4 mr-2" }, void 0, false, {
              fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
              lineNumber: 305,
              columnNumber: 17
            }, this),
            " ",
            t("ai.settings")
          ] }, void 0, true, {
            fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
            lineNumber: 304,
            columnNumber: 15
          }, this) }, void 0, false, {
            fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
            lineNumber: 303,
            columnNumber: 13
          }, this),
          /* @__PURE__ */ jsxDEV(DialogContent, { children: [
            /* @__PURE__ */ jsxDEV(DialogHeader, { children: [
              /* @__PURE__ */ jsxDEV(DialogTitle, { children: t("ai.config.title") }, void 0, false, {
                fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                lineNumber: 310,
                columnNumber: 15
              }, this),
              /* @__PURE__ */ jsxDEV(DialogDescription, { children: t("ai.config.desc") }, void 0, false, {
                fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                lineNumber: 311,
                columnNumber: 15
              }, this)
            ] }, void 0, true, {
              fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
              lineNumber: 309,
              columnNumber: 13
            }, this),
            /* @__PURE__ */ jsxDEV("div", { className: "space-y-4 py-4", children: [
              /* @__PURE__ */ jsxDEV("div", { className: "grid gap-2", children: [
                /* @__PURE__ */ jsxDEV(Label, { children: t("ai.system.label") }, void 0, false, {
                  fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                  lineNumber: 317,
                  columnNumber: 17
                }, this),
                /* @__PURE__ */ jsxDEV(
                  Textarea,
                  {
                    value: systemPrompt,
                    onChange: (e) => setSystemPrompt(e.target.value),
                    placeholder: t("ai.system.placeholder"),
                    className: "h-24"
                  },
                  void 0,
                  false,
                  {
                    fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                    lineNumber: 318,
                    columnNumber: 17
                  },
                  this
                )
              ] }, void 0, true, {
                fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                lineNumber: 316,
                columnNumber: 15
              }, this),
              /* @__PURE__ */ jsxDEV("div", { className: "grid gap-2", children: [
                /* @__PURE__ */ jsxDEV(Label, { children: t("ai.key.label") }, void 0, false, {
                  fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                  lineNumber: 326,
                  columnNumber: 17
                }, this),
                /* @__PURE__ */ jsxDEV(
                  Input,
                  {
                    value: apiKey,
                    onChange: (e) => setApiKey(e.target.value),
                    type: "password",
                    placeholder: t("ai.key.placeholder")
                  },
                  void 0,
                  false,
                  {
                    fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                    lineNumber: 327,
                    columnNumber: 17
                  },
                  this
                ),
                /* @__PURE__ */ jsxDEV("p", { className: "text-xs text-muted-foreground", children: [
                  t("ai.key.help"),
                  " ",
                  /* @__PURE__ */ jsxDEV("a", { href: "https://open.bigmodel.cn/", target: "_blank", className: "underline", children: "open.bigmodel.cn" }, void 0, false, {
                    fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                    lineNumber: 334,
                    columnNumber: 38
                  }, this)
                ] }, void 0, true, {
                  fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                  lineNumber: 333,
                  columnNumber: 17
                }, this)
              ] }, void 0, true, {
                fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                lineNumber: 325,
                columnNumber: 15
              }, this),
              /* @__PURE__ */ jsxDEV("div", { className: "grid gap-2", children: [
                /* @__PURE__ */ jsxDEV(Label, { children: t("ai.model.label") }, void 0, false, {
                  fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                  lineNumber: 338,
                  columnNumber: 17
                }, this),
                /* @__PURE__ */ jsxDEV(
                  Input,
                  {
                    value: model,
                    onChange: (e) => setModel(e.target.value),
                    placeholder: t("ai.model.placeholder")
                  },
                  void 0,
                  false,
                  {
                    fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                    lineNumber: 339,
                    columnNumber: 17
                  },
                  this
                )
              ] }, void 0, true, {
                fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                lineNumber: 337,
                columnNumber: 15
              }, this),
              /* @__PURE__ */ jsxDEV(Button, { onClick: saveConfig, className: "w-full", children: t("ai.save") }, void 0, false, {
                fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                lineNumber: 345,
                columnNumber: 15
              }, this)
            ] }, void 0, true, {
              fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
              lineNumber: 315,
              columnNumber: 13
            }, this)
          ] }, void 0, true, {
            fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
            lineNumber: 308,
            columnNumber: 11
          }, this)
        ] }, void 0, true, {
          fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
          lineNumber: 302,
          columnNumber: 11
        }, this)
      ] }, void 0, true, {
        fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
        lineNumber: 246,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
      lineNumber: 241,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ jsxDEV(Card, { className: "flex-1 p-4 overflow-hidden flex flex-col bg-muted/30", children: [
      /* @__PURE__ */ jsxDEV(ScrollArea, { className: "flex-1 pr-4", children: /* @__PURE__ */ jsxDEV("div", { className: "space-y-4", children: [
        messages.length === 0 && /* @__PURE__ */ jsxDEV("div", { className: "text-center text-muted-foreground mt-20", children: [
          /* @__PURE__ */ jsxDEV(Bot, { className: "h-12 w-12 mx-auto mb-4 opacity-50" }, void 0, false, {
            fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
            lineNumber: 357,
            columnNumber: 17
          }, this),
          /* @__PURE__ */ jsxDEV("p", { children: t("ai.start") }, void 0, false, {
            fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
            lineNumber: 358,
            columnNumber: 17
          }, this)
        ] }, void 0, true, {
          fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
          lineNumber: 356,
          columnNumber: 13
        }, this),
        messages.map(
          (msg, i) => /* @__PURE__ */ jsxDEV(
            "div",
            {
              className: `flex ${msg.role === "user" ? "justify-end" : "justify-start"}`,
              children: /* @__PURE__ */ jsxDEV(
                "div",
                {
                  className: `flex gap-3 max-w-[80%] ${msg.role === "user" ? "flex-row-reverse" : "flex-row"}`,
                  children: [
                    /* @__PURE__ */ jsxDEV("div", { className: `h-8 w-8 rounded-full flex items-center justify-center shrink-0 ${msg.role === "user" ? "bg-primary text-primary-foreground" : "bg-secondary"}`, children: msg.role === "user" ? /* @__PURE__ */ jsxDEV(User, { className: "h-5 w-5" }, void 0, false, {
                      fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                      lineNumber: 376,
                      columnNumber: 44
                    }, this) : /* @__PURE__ */ jsxDEV(Bot, { className: "h-5 w-5" }, void 0, false, {
                      fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                      lineNumber: 376,
                      columnNumber: 75
                    }, this) }, void 0, false, {
                      fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                      lineNumber: 373,
                      columnNumber: 19
                    }, this),
                    /* @__PURE__ */ jsxDEV(
                      "div",
                      {
                        className: `p-3 rounded-lg text-sm whitespace-pre-wrap ${msg.role === "user" ? "bg-primary text-primary-foreground" : "bg-card border shadow-sm"}`,
                        children: msg.content
                      },
                      void 0,
                      false,
                      {
                        fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                        lineNumber: 378,
                        columnNumber: 19
                      },
                      this
                    )
                  ]
                },
                void 0,
                true,
                {
                  fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
                  lineNumber: 368,
                  columnNumber: 17
                },
                this
              )
            },
            i,
            false,
            {
              fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
              lineNumber: 362,
              columnNumber: 13
            },
            this
          )
        ),
        isLoading && /* @__PURE__ */ jsxDEV("div", { className: "flex justify-start", children: /* @__PURE__ */ jsxDEV("div", { className: "bg-card border p-3 rounded-lg text-sm shadow-sm", children: t("ai.thinking") }, void 0, false, {
          fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
          lineNumber: 392,
          columnNumber: 18
        }, this) }, void 0, false, {
          fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
          lineNumber: 391,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV("div", { ref: scrollRef }, void 0, false, {
          fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
          lineNumber: 397,
          columnNumber: 13
        }, this)
      ] }, void 0, true, {
        fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
        lineNumber: 354,
        columnNumber: 11
      }, this) }, void 0, false, {
        fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
        lineNumber: 353,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV("div", { className: "pt-4 mt-2 flex gap-2", children: [
        /* @__PURE__ */ jsxDEV(
          Textarea,
          {
            value: input,
            onChange: (e) => setInput(e.target.value),
            onKeyDown: (e) => e.key === "Enter" && !e.shiftKey && handleSend(),
            placeholder: t("ai.placeholder"),
            disabled: isLoading,
            className: "flex-1"
          },
          void 0,
          false,
          {
            fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
            lineNumber: 402,
            columnNumber: 11
          },
          this
        ),
        /* @__PURE__ */ jsxDEV(Button, { onClick: handleSend, disabled: isLoading, children: /* @__PURE__ */ jsxDEV(Send, { className: "h-4 w-4" }, void 0, false, {
          fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
          lineNumber: 411,
          columnNumber: 13
        }, this) }, void 0, false, {
          fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
          lineNumber: 410,
          columnNumber: 11
        }, this)
      ] }, void 0, true, {
        fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
        lineNumber: 401,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
      lineNumber: 352,
      columnNumber: 7
    }, this)
  ] }, void 0, true, {
    fileName: "D:/桌面端应用plus/app/src/pages/AiAgent.tsx",
    lineNumber: 240,
    columnNumber: 5
  }, this);
}
_s(AiAgent, "98eqXxPVUvE/bm3/ozFLeGdYYGU=", false, function() {
  return [useTranslation];
});
_c = AiAgent;
var _c;
$RefreshReg$(_c, "AiAgent");
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("D:/桌面端应用plus/app/src/pages/AiAgent.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("D:/桌面端应用plus/app/src/pages/AiAgent.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}
function $RefreshReg$(type, id) {
  return RefreshRuntime.register(type, "D:/桌面端应用plus/app/src/pages/AiAgent.tsx " + id);
}
function $RefreshSig$() {
  return RefreshRuntime.createSignatureFunctionForTransform();
}

//# sourceMappingURL=data:application/json;base64,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SCxLQUROOUY7QUFBTyxJQUFBOEY7QUFBQUMsYUFBQUQsSUFBQSIsIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlUmVmIiwidXNlRWZmZWN0IiwidXNlVHJhbnNsYXRpb24iLCJ0b2FzdCIsIkJ1dHRvbiIsIklucHV0IiwiU2Nyb2xsQXJlYSIsIkNhcmQiLCJTZW5kIiwiQm90IiwiVXNlciIsIlNldHRpbmdzMiIsIkhpc3RvcnkiLCJQbHVzIiwiTWVzc2FnZVNxdWFyZSIsIlRyYXNoMiIsImF4aW9zIiwiZGIiLCJEaWFsb2ciLCJEaWFsb2dDb250ZW50IiwiRGlhbG9nSGVhZGVyIiwiRGlhbG9nVGl0bGUiLCJEaWFsb2dUcmlnZ2VyIiwiRGlhbG9nRGVzY3JpcHRpb24iLCJMYWJlbCIsIlRleHRhcmVhIiwiQWlBZ2VudCIsIl9zIiwidCIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJpbnB1dCIsInNldElucHV0IiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwic2Nyb2xsUmVmIiwic2Vzc2lvbnMiLCJzZXRTZXNzaW9ucyIsInNlc3Npb25JZCIsInNldFNlc3Npb25JZCIsImlzSGlzdG9yeU9wZW4iLCJzZXRJc0hpc3RvcnlPcGVuIiwic3lzdGVtUHJvbXB0Iiwic2V0U3lzdGVtUHJvbXB0IiwiYXBpS2V5Iiwic2V0QXBpS2V5IiwibW9kZWwiLCJzZXRNb2RlbCIsImluaXQiLCJzZXR0aW5ncyIsImdldFNldHRpbmdzIiwibG9hZGVkU2Vzc2lvbnMiLCJnZXRTZXNzaW9ucyIsImxlbmd0aCIsInNvcnQiLCJhIiwiYiIsInVwZGF0ZWRBdCIsImlkIiwiaGlzdG9yeSIsImdldENoYXRIaXN0b3J5IiwibmV3SWQiLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJuZXdTZXNzaW9uIiwidGl0bGUiLCJjb250ZW50Iiwic2xpY2UiLCJzYXZlU2Vzc2lvbiIsImhhbmRsZU5ld0NoYXQiLCJzYXZlIiwiY3VycmVudFNlc3Npb24iLCJmaW5kIiwicyIsImZpcnN0VXNlck1zZyIsIm0iLCJyb2xlIiwidXBkYXRlZFNlc3Npb24iLCJwcmV2IiwiaWR4IiwiZmluZEluZGV4IiwibmV3U2Vzc2lvbnMiLCJsb2FkU2Vzc2lvbiIsInNlc3Npb24iLCJoYW5kbGVEZWxldGVTZXNzaW9uIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsImNvbmZpcm0iLCJkZWxldGVTZXNzaW9uIiwiZmlsdGVyIiwic2F2ZUNvbmZpZyIsInRyaW0iLCJlcnJvciIsInNhdmVTZXR0aW5ncyIsInN1Y2Nlc3MiLCJjb25zb2xlIiwiY3VycmVudCIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJoYW5kbGVTZW5kIiwidXNlck1zZyIsImNvbnZlcnNhdGlvbiIsInJlc3BvbnNlIiwicG9zdCIsInN0cmVhbSIsImhlYWRlcnMiLCJhaU1zZyIsImRhdGEiLCJjaG9pY2VzIiwibWVzc2FnZSIsImVycm9yTXNnIiwibWFwIiwidG9Mb2NhbGVTdHJpbmciLCJ0YXJnZXQiLCJ2YWx1ZSIsIm1zZyIsImkiLCJrZXkiLCJzaGlmdEtleSIsIl9jIiwiJFJlZnJlc2hSZWckIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzIjpbIkFpQWdlbnQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tIFwicmVhY3QtaTE4bmV4dFwiO1xuaW1wb3J0IHsgdG9hc3QgfSBmcm9tIFwic29ubmVyXCI7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2J1dHRvblwiO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2lucHV0XCI7XG5pbXBvcnQgeyBTY3JvbGxBcmVhIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9zY3JvbGwtYXJlYVwiO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvY2FyZFwiO1xuaW1wb3J0IHsgU2VuZCwgQm90LCBVc2VyLCBTZXR0aW5nczIsIEhpc3RvcnksIFBsdXMsIE1lc3NhZ2VTcXVhcmUsIFRyYXNoMiB9IGZyb20gXCJsdWNpZGUtcmVhY3RcIjtcbmltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcbmltcG9ydCB7IGRiIH0gZnJvbSBcIkAvbGliL2RiXCI7XG5pbXBvcnQge1xuICBEaWFsb2csXG4gIERpYWxvZ0NvbnRlbnQsXG4gIERpYWxvZ0hlYWRlcixcbiAgRGlhbG9nVGl0bGUsXG4gIERpYWxvZ1RyaWdnZXIsXG4gIERpYWxvZ0Rlc2NyaXB0aW9uLFxufSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2RpYWxvZ1wiO1xuaW1wb3J0IHsgTGFiZWwgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2xhYmVsXCI7XG5pbXBvcnQgeyBUZXh0YXJlYSB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvdGV4dGFyZWFcIjtcblxuaW50ZXJmYWNlIE1lc3NhZ2Uge1xuICByb2xlOiBcInVzZXJcIiB8IFwiYXNzaXN0YW50XCIgfCBcInN5c3RlbVwiO1xuICBjb250ZW50OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBTZXNzaW9uIHtcbiAgaWQ6IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbiAgbWVzc2FnZXM6IE1lc3NhZ2VbXTtcbiAgdXBkYXRlZEF0OiBudW1iZXI7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFpQWdlbnQoKSB7XG4gIGNvbnN0IHsgdCB9ID0gdXNlVHJhbnNsYXRpb24oKTtcbiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSB1c2VTdGF0ZTxNZXNzYWdlW10+KFtdKTtcbiAgY29uc3QgW2lucHV0LCBzZXRJbnB1dF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3Qgc2Nyb2xsUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgXG4gIC8vIFNlc3Npb25zXG4gIGNvbnN0IFtzZXNzaW9ucywgc2V0U2Vzc2lvbnNdID0gdXNlU3RhdGU8U2Vzc2lvbltdPihbXSk7XG4gIGNvbnN0IFtzZXNzaW9uSWQsIHNldFNlc3Npb25JZF0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiXCIpO1xuICBjb25zdCBbaXNIaXN0b3J5T3Blbiwgc2V0SXNIaXN0b3J5T3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIFxuICAvLyBNb2RlbCBDb25maWdcbiAgY29uc3QgW3N5c3RlbVByb21wdCwgc2V0U3lzdGVtUHJvbXB0XSA9IHVzZVN0YXRlKFwi5L2g5piv5LiA5Liq5LmQ5LqO5Yqp5Lq655qEQUnliqnmiYvjgIJcIik7XG4gIGNvbnN0IFthcGlLZXksIHNldEFwaUtleV0gPSB1c2VTdGF0ZShcIjEyYjNjZjUxYmEwNjRhNDZiNjhlY2M2YmJkNWIzMWVjLmt3YTl5UG9VSXhEeEoxNkpcIik7XG4gIGNvbnN0IFttb2RlbCwgc2V0TW9kZWxdID0gdXNlU3RhdGUoXCJnbG0tNC1mbGFzaFwiKTsgXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBMb2FkIHNldHRpbmdzIGZyb20gREJcbiAgICBjb25zdCBpbml0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2V0dGluZ3MgPSBhd2FpdCBkYi5nZXRTZXR0aW5ncygpO1xuICAgICAgaWYgKHNldHRpbmdzLmFwaUtleSkgc2V0QXBpS2V5KHNldHRpbmdzLmFwaUtleSk7XG4gICAgICBpZiAoc2V0dGluZ3MubW9kZWwpIHNldE1vZGVsKHNldHRpbmdzLm1vZGVsKTtcbiAgICAgIGlmIChzZXR0aW5ncy5zeXN0ZW1Qcm9tcHQpIHNldFN5c3RlbVByb21wdChzZXR0aW5ncy5zeXN0ZW1Qcm9tcHQpO1xuICAgICAgXG4gICAgICAvLyBMb2FkIHNlc3Npb25zXG4gICAgICBjb25zdCBsb2FkZWRTZXNzaW9ucyA9IGF3YWl0IGRiLmdldFNlc3Npb25zKCk7XG4gICAgICBpZiAobG9hZGVkU2Vzc2lvbnMgJiYgbG9hZGVkU2Vzc2lvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBTb3J0IGJ5IHVwZGF0ZWRBdCBkZXNjXG4gICAgICAgIGxvYWRlZFNlc3Npb25zLnNvcnQoKGE6IFNlc3Npb24sIGI6IFNlc3Npb24pID0+IGIudXBkYXRlZEF0IC0gYS51cGRhdGVkQXQpO1xuICAgICAgICBzZXRTZXNzaW9ucyhsb2FkZWRTZXNzaW9ucyk7XG4gICAgICAgIHNldFNlc3Npb25JZChsb2FkZWRTZXNzaW9uc1swXS5pZCk7XG4gICAgICAgIHNldE1lc3NhZ2VzKGxvYWRlZFNlc3Npb25zWzBdLm1lc3NhZ2VzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE1pZ3JhdGlvbiBjaGVja1xuICAgICAgICBjb25zdCBoaXN0b3J5ID0gYXdhaXQgZGIuZ2V0Q2hhdEhpc3RvcnkoKTtcbiAgICAgICAgaWYgKGhpc3RvcnkgJiYgaGlzdG9yeS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgbmV3SWQgPSBEYXRlLm5vdygpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgY29uc3QgbmV3U2Vzc2lvbiA9IHtcbiAgICAgICAgICAgIGlkOiBuZXdJZCxcbiAgICAgICAgICAgIHRpdGxlOiBoaXN0b3J5WzBdLmNvbnRlbnQuc2xpY2UoMCwgMjApIHx8IHQoXCJhaS5yZWNvdmVyZWRcIiksXG4gICAgICAgICAgICBtZXNzYWdlczogaGlzdG9yeSxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKVxuICAgICAgICAgIH07XG4gICAgICAgICAgYXdhaXQgZGIuc2F2ZVNlc3Npb24obmV3U2Vzc2lvbik7XG4gICAgICAgICAgc2V0U2Vzc2lvbnMoW25ld1Nlc3Npb25dKTtcbiAgICAgICAgICBzZXRTZXNzaW9uSWQobmV3SWQpO1xuICAgICAgICAgIHNldE1lc3NhZ2VzKGhpc3RvcnkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGhhbmRsZU5ld0NoYXQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgaW5pdCgpO1xuICB9LCBbXSk7XG5cbiAgLy8gQXV0by1zYXZlIGN1cnJlbnQgc2Vzc2lvblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghc2Vzc2lvbklkIHx8IG1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgY29uc3Qgc2F2ZSA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTZXNzaW9uID0gc2Vzc2lvbnMuZmluZChzID0+IHMuaWQgPT09IHNlc3Npb25JZCk7XG4gICAgICBsZXQgdGl0bGUgPSBjdXJyZW50U2Vzc2lvbj8udGl0bGUgfHwgXCJOZXcgQ2hhdFwiO1xuICAgICAgXG4gICAgICAvLyBHZW5lcmF0ZSB0aXRsZSBmcm9tIGZpcnN0IHVzZXIgbWVzc2FnZVxuICAgICAgaWYgKHRpdGxlID09PSBcIk5ldyBDaGF0XCIpIHtcbiAgICAgICAgY29uc3QgZmlyc3RVc2VyTXNnID0gbWVzc2FnZXMuZmluZChtID0+IG0ucm9sZSA9PT0gJ3VzZXInKTtcbiAgICAgICAgaWYgKGZpcnN0VXNlck1zZykge1xuICAgICAgICAgIHRpdGxlID0gZmlyc3RVc2VyTXNnLmNvbnRlbnQuc2xpY2UoMCwgMTUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVwZGF0ZWRTZXNzaW9uID0ge1xuICAgICAgICBpZDogc2Vzc2lvbklkLFxuICAgICAgICB0aXRsZSxcbiAgICAgICAgbWVzc2FnZXMsXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgYXdhaXQgZGIuc2F2ZVNlc3Npb24odXBkYXRlZFNlc3Npb24pO1xuICAgICAgXG4gICAgICBzZXRTZXNzaW9ucyhwcmV2ID0+IHtcbiAgICAgICAgY29uc3QgaWR4ID0gcHJldi5maW5kSW5kZXgocyA9PiBzLmlkID09PSBzZXNzaW9uSWQpO1xuICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICBjb25zdCBuZXdTZXNzaW9ucyA9IFsuLi5wcmV2XTtcbiAgICAgICAgICBuZXdTZXNzaW9uc1tpZHhdID0gdXBkYXRlZFNlc3Npb247XG4gICAgICAgICAgcmV0dXJuIG5ld1Nlc3Npb25zLnNvcnQoKGEsIGIpID0+IGIudXBkYXRlZEF0IC0gYS51cGRhdGVkQXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbdXBkYXRlZFNlc3Npb24sIC4uLnByZXZdO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICBzYXZlKCk7XG4gIH0sIFttZXNzYWdlc10pOyAvLyBUcmlnZ2VyIHNhdmUgb24gbWVzc2FnZSB1cGRhdGVcblxuICBjb25zdCBoYW5kbGVOZXdDaGF0ID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG5ld0lkID0gRGF0ZS5ub3coKS50b1N0cmluZygpO1xuICAgIGNvbnN0IG5ld1Nlc3Npb24gPSB7XG4gICAgICBpZDogbmV3SWQsXG4gICAgICB0aXRsZTogXCJOZXcgQ2hhdFwiLFxuICAgICAgbWVzc2FnZXM6IFtdLFxuICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpXG4gICAgfTtcbiAgICBhd2FpdCBkYi5zYXZlU2Vzc2lvbihuZXdTZXNzaW9uKTtcbiAgICBzZXRTZXNzaW9ucyhwcmV2ID0+IFtuZXdTZXNzaW9uLCAuLi5wcmV2XSk7XG4gICAgc2V0U2Vzc2lvbklkKG5ld0lkKTtcbiAgICBzZXRNZXNzYWdlcyhbXSk7XG4gICAgc2V0SXNIaXN0b3J5T3BlbihmYWxzZSk7XG4gIH07XG5cbiAgY29uc3QgbG9hZFNlc3Npb24gPSAoc2Vzc2lvbjogU2Vzc2lvbikgPT4ge1xuICAgIHNldFNlc3Npb25JZChzZXNzaW9uLmlkKTtcbiAgICBzZXRNZXNzYWdlcyhzZXNzaW9uLm1lc3NhZ2VzKTtcbiAgICBzZXRJc0hpc3RvcnlPcGVuKGZhbHNlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVEZWxldGVTZXNzaW9uID0gYXN5bmMgKGU6IGFueSwgaWQ6IHN0cmluZykgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgaWYgKGNvbmZpcm0odChcImFpLmRlbGV0ZV9jb25maXJtXCIpIHx8IFwiQXJlIHlvdSBzdXJlP1wiKSkge1xuICAgICAgYXdhaXQgZGIuZGVsZXRlU2Vzc2lvbihpZCk7XG4gICAgICBjb25zdCBuZXdTZXNzaW9ucyA9IHNlc3Npb25zLmZpbHRlcihzID0+IHMuaWQgIT09IGlkKTtcbiAgICAgIHNldFNlc3Npb25zKG5ld1Nlc3Npb25zKTtcbiAgICAgIGlmIChpZCA9PT0gc2Vzc2lvbklkKSB7XG4gICAgICAgIGlmIChuZXdTZXNzaW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgbG9hZFNlc3Npb24obmV3U2Vzc2lvbnNbMF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGhhbmRsZU5ld0NoYXQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjb25zdCBzYXZlQ29uZmlnID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICghYXBpS2V5LnRyaW0oKSkge1xuICAgICAgdG9hc3QuZXJyb3IodChcImFpLmtleS5lbXB0eVwiKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBkYi5zYXZlU2V0dGluZ3MoeyBhcGlLZXksIG1vZGVsLCBzeXN0ZW1Qcm9tcHQgfSk7XG4gICAgICB0b2FzdC5zdWNjZXNzKHQoXCJhaS5jb25maWcuc2F2ZWRcIikpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiU2F2ZSBjb25maWcgZXJyb3I6XCIsIGVycm9yKTtcbiAgICAgIHRvYXN0LmVycm9yKHQoXCJhaS5jb25maWcuZmFpbGVkXCIpKTtcbiAgICB9XG4gIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc2Nyb2xsUmVmLmN1cnJlbnQpIHtcbiAgICAgIHNjcm9sbFJlZi5jdXJyZW50LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6IFwic21vb3RoXCIgfSk7XG4gICAgfVxuICB9LCBbbWVzc2FnZXNdKTtcblxuICBjb25zdCBoYW5kbGVTZW5kID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICghaW5wdXQudHJpbSgpKSByZXR1cm47XG4gICAgaWYgKCFhcGlLZXkpIHtcbiAgICAgIHRvYXN0LmVycm9yKHQoXCJhaS5rZXkubWlzc2luZ1wiKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdXNlck1zZzogTWVzc2FnZSA9IHsgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IGlucHV0IH07XG4gICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IFsuLi5wcmV2LCB1c2VyTXNnXSk7XG4gICAgc2V0SW5wdXQoXCJcIik7XG4gICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbiA9IFtcbiAgICAgICAgeyByb2xlOiBcInN5c3RlbVwiLCBjb250ZW50OiBzeXN0ZW1Qcm9tcHQgfSxcbiAgICAgICAgLi4ubWVzc2FnZXMsXG4gICAgICAgIHVzZXJNc2dcbiAgICAgIF07XG5cbiAgICAgIC8vIFpoaXB1IEFJIEVuZHBvaW50XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoXG4gICAgICAgIFwiaHR0cHM6Ly9vcGVuLmJpZ21vZGVsLmNuL2FwaS9wYWFzL3Y0L2NoYXQvY29tcGxldGlvbnNcIixcbiAgICAgICAge1xuICAgICAgICAgIG1vZGVsOiBtb2RlbCxcbiAgICAgICAgICBtZXNzYWdlczogY29udmVyc2F0aW9uLFxuICAgICAgICAgIHN0cmVhbTogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBgQmVhcmVyICR7YXBpS2V5fWAsXG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgY29uc3QgYWlNc2c6IE1lc3NhZ2UgPSB7XG4gICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgIGNvbnRlbnQ6IHJlc3BvbnNlLmRhdGEuY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnRcbiAgICAgIH07XG4gICAgICBzZXRNZXNzYWdlcygocHJldikgPT4gWy4uLnByZXYsIGFpTXNnXSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiQUkgRXJyb3I6XCIsIGVycm9yKTtcbiAgICAgIHRvYXN0LmVycm9yKHQoXCJhaS5yZXF1ZXN0LmZhaWxlZFwiKSk7XG4gICAgICBjb25zdCBlcnJvck1zZzogTWVzc2FnZSA9IHtcbiAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgY29udGVudDogYEVycm9yOiAke2Vycm9yLnJlc3BvbnNlPy5kYXRhPy5lcnJvcj8ubWVzc2FnZSB8fCBlcnJvci5tZXNzYWdlfWBcbiAgICAgIH07XG4gICAgICBzZXRNZXNzYWdlcygocHJldikgPT4gWy4uLnByZXYsIGVycm9yTXNnXSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGgtZnVsbCBzcGFjZS15LTRcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGJvcmRlci1iIHBiLTRcIj5cbiAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgIDxCb3QgY2xhc3NOYW1lPVwiaC02IHctNlwiIC8+IHt0KFwibmF2LmFpXCIpfVxuICAgICAgICA8L2gyPlxuICAgICAgICBcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgIDxCdXR0b24gdmFyaWFudD1cIm91dGxpbmVcIiBzaXplPVwic21cIiBvbkNsaWNrPXtoYW5kbGVOZXdDaGF0fT5cbiAgICAgICAgICAgIDxQbHVzIGNsYXNzTmFtZT1cImgtNCB3LTQgbXItMlwiIC8+IHt0KFwiYWkubmV3X2NoYXRcIikgfHwgXCJOZXcgQ2hhdFwifVxuICAgICAgICAgIDwvQnV0dG9uPlxuXG4gICAgICAgICAgPERpYWxvZyBvcGVuPXtpc0hpc3RvcnlPcGVufSBvbk9wZW5DaGFuZ2U9e3NldElzSGlzdG9yeU9wZW59PlxuICAgICAgICAgICAgPERpYWxvZ1RyaWdnZXIgYXNDaGlsZD5cbiAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PVwib3V0bGluZVwiIHNpemU9XCJzbVwiPlxuICAgICAgICAgICAgICAgIDxIaXN0b3J5IGNsYXNzTmFtZT1cImgtNCB3LTQgbXItMlwiIC8+IHt0KFwiYWkuaGlzdG9yeVwiKSB8fCBcIkhpc3RvcnlcIn1cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L0RpYWxvZ1RyaWdnZXI+XG4gICAgICAgICAgICA8RGlhbG9nQ29udGVudCBjbGFzc05hbWU9XCJtYXgtdy1tZCBtYXgtaC1bODB2aF0gZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICA8RGlhbG9nSGVhZGVyPlxuICAgICAgICAgICAgICAgIDxEaWFsb2dUaXRsZT57dChcImFpLmhpc3RvcnlcIikgfHwgXCJDaGF0IEhpc3RvcnlcIn08L0RpYWxvZ1RpdGxlPlxuICAgICAgICAgICAgICA8L0RpYWxvZ0hlYWRlcj5cbiAgICAgICAgICAgICAgPFNjcm9sbEFyZWEgY2xhc3NOYW1lPVwiZmxleC0xIHByLTQgbXQtMlwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAgICAgICAgICB7c2Vzc2lvbnMubWFwKChzZXNzaW9uKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e3Nlc3Npb24uaWR9XG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gbG9hZFNlc3Npb24oc2Vzc2lvbil9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtMyByb3VuZGVkLWxnIGJvcmRlciBjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1hY2NlbnQgdHJhbnNpdGlvbi1jb2xvcnMgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25JZCA9PT0gc2Vzc2lvbi5pZCA/IFwiYmctYWNjZW50XCIgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPE1lc3NhZ2VTcXVhcmUgY2xhc3NOYW1lPVwiaC00IHctNCBzaHJpbmstMCBvcGFjaXR5LTcwXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidHJ1bmNhdGUgdGV4dC1zbSBmb250LW1lZGl1bVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZXNzaW9uLnRpdGxlIHx8IFwiVW50aXRsZWQgQ2hhdFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kIGZvbnQtbm9ybWFsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge25ldyBEYXRlKHNlc3Npb24udXBkYXRlZEF0KS50b0xvY2FsZVN0cmluZygpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PVwiZ2hvc3RcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cImljb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC04IHctOCB0ZXh0LW11dGVkLWZvcmVncm91bmQgaG92ZXI6dGV4dC1kZXN0cnVjdGl2ZSBzaHJpbmstMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4gaGFuZGxlRGVsZXRlU2Vzc2lvbihlLCBzZXNzaW9uLmlkKX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhc2gyIGNsYXNzTmFtZT1cImgtNCB3LTRcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAge3Nlc3Npb25zLmxlbmd0aCA9PT0gMCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHRleHQtbXV0ZWQtZm9yZWdyb3VuZCB0ZXh0LXNtIHB5LThcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7dChcImFpLm5vX2hpc3RvcnlcIikgfHwgXCJObyBjaGF0IGhpc3RvcnlcIn1cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9TY3JvbGxBcmVhPlxuICAgICAgICAgICAgPC9EaWFsb2dDb250ZW50PlxuICAgICAgICAgIDwvRGlhbG9nPlxuXG4gICAgICAgICAgPERpYWxvZz5cbiAgICAgICAgICAgIDxEaWFsb2dUcmlnZ2VyIGFzQ2hpbGQ+XG4gICAgICAgICAgICAgIDxCdXR0b24gdmFyaWFudD1cIm91dGxpbmVcIiBzaXplPVwic21cIj5cbiAgICAgICAgICAgICAgICA8U2V0dGluZ3MyIGNsYXNzTmFtZT1cImgtNCB3LTQgbXItMlwiIC8+IHt0KFwiYWkuc2V0dGluZ3NcIil9XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9EaWFsb2dUcmlnZ2VyPlxuICAgICAgICAgIDxEaWFsb2dDb250ZW50PlxuICAgICAgICAgICAgPERpYWxvZ0hlYWRlcj5cbiAgICAgICAgICAgICAgPERpYWxvZ1RpdGxlPnt0KFwiYWkuY29uZmlnLnRpdGxlXCIpfTwvRGlhbG9nVGl0bGU+XG4gICAgICAgICAgICAgIDxEaWFsb2dEZXNjcmlwdGlvbj5cbiAgICAgICAgICAgICAgICB7dChcImFpLmNvbmZpZy5kZXNjXCIpfVxuICAgICAgICAgICAgICA8L0RpYWxvZ0Rlc2NyaXB0aW9uPlxuICAgICAgICAgICAgPC9EaWFsb2dIZWFkZXI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNCBweS00XCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBnYXAtMlwiPlxuICAgICAgICAgICAgICAgIDxMYWJlbD57dChcImFpLnN5c3RlbS5sYWJlbFwiKX08L0xhYmVsPlxuICAgICAgICAgICAgICAgIDxUZXh0YXJlYSBcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtzeXN0ZW1Qcm9tcHR9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGU6IGFueSkgPT4gc2V0U3lzdGVtUHJvbXB0KGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KFwiYWkuc3lzdGVtLnBsYWNlaG9sZGVyXCIpfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC0yNFwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBnYXAtMlwiPlxuICAgICAgICAgICAgICAgIDxMYWJlbD57dChcImFpLmtleS5sYWJlbFwiKX08L0xhYmVsPlxuICAgICAgICAgICAgICAgIDxJbnB1dCBcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXthcGlLZXl9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGU6IGFueSkgPT4gc2V0QXBpS2V5KGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwYXNzd29yZFwiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dChcImFpLmtleS5wbGFjZWhvbGRlclwiKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+XG4gICAgICAgICAgICAgICAgICB7dChcImFpLmtleS5oZWxwXCIpfSA8YSBocmVmPVwiaHR0cHM6Ly9vcGVuLmJpZ21vZGVsLmNuL1wiIHRhcmdldD1cIl9ibGFua1wiIGNsYXNzTmFtZT1cInVuZGVybGluZVwiPm9wZW4uYmlnbW9kZWwuY248L2E+XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgPExhYmVsPnt0KFwiYWkubW9kZWwubGFiZWxcIil9PC9MYWJlbD5cbiAgICAgICAgICAgICAgICA8SW5wdXQgXG4gICAgICAgICAgICAgICAgICB2YWx1ZT17bW9kZWx9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGU6IGFueSkgPT4gc2V0TW9kZWwoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoXCJhaS5tb2RlbC5wbGFjZWhvbGRlclwiKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXtzYXZlQ29uZmlnfSBjbGFzc05hbWU9XCJ3LWZ1bGxcIj57dChcImFpLnNhdmVcIil9PC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L0RpYWxvZ0NvbnRlbnQ+XG4gICAgICAgIDwvRGlhbG9nPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8Q2FyZCBjbGFzc05hbWU9XCJmbGV4LTEgcC00IG92ZXJmbG93LWhpZGRlbiBmbGV4IGZsZXgtY29sIGJnLW11dGVkLzMwXCI+XG4gICAgICAgIDxTY3JvbGxBcmVhIGNsYXNzTmFtZT1cImZsZXgtMSBwci00XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICAgIHttZXNzYWdlcy5sZW5ndGggPT09IDAgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHRleHQtbXV0ZWQtZm9yZWdyb3VuZCBtdC0yMFwiPlxuICAgICAgICAgICAgICAgIDxCb3QgY2xhc3NOYW1lPVwiaC0xMiB3LTEyIG14LWF1dG8gbWItNCBvcGFjaXR5LTUwXCIgLz5cbiAgICAgICAgICAgICAgICA8cD57dChcImFpLnN0YXJ0XCIpfTwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge21lc3NhZ2VzLm1hcCgobXNnLCBpKSA9PiAoXG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBrZXk9e2l9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCAke1xuICAgICAgICAgICAgICAgICAgbXNnLnJvbGUgPT09IFwidXNlclwiID8gXCJqdXN0aWZ5LWVuZFwiIDogXCJqdXN0aWZ5LXN0YXJ0XCJcbiAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggZ2FwLTMgbWF4LXctWzgwJV0gJHtcbiAgICAgICAgICAgICAgICAgICAgbXNnLnJvbGUgPT09IFwidXNlclwiID8gXCJmbGV4LXJvdy1yZXZlcnNlXCIgOiBcImZsZXgtcm93XCJcbiAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgaC04IHctOCByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgc2hyaW5rLTAgJHtcbiAgICAgICAgICAgICAgICAgICAgbXNnLnJvbGUgPT09IFwidXNlclwiID8gXCJiZy1wcmltYXJ5IHRleHQtcHJpbWFyeS1mb3JlZ3JvdW5kXCIgOiBcImJnLXNlY29uZGFyeVwiXG4gICAgICAgICAgICAgICAgICB9YH0+XG4gICAgICAgICAgICAgICAgICAgIHttc2cucm9sZSA9PT0gXCJ1c2VyXCIgPyA8VXNlciBjbGFzc05hbWU9XCJoLTUgdy01XCIgLz4gOiA8Qm90IGNsYXNzTmFtZT1cImgtNSB3LTVcIiAvPn1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BwLTMgcm91bmRlZC1sZyB0ZXh0LXNtIHdoaXRlc3BhY2UtcHJlLXdyYXAgJHtcbiAgICAgICAgICAgICAgICAgICAgICBtc2cucm9sZSA9PT0gXCJ1c2VyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCJiZy1wcmltYXJ5IHRleHQtcHJpbWFyeS1mb3JlZ3JvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJiZy1jYXJkIGJvcmRlciBzaGFkb3ctc21cIlxuICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge21zZy5jb250ZW50fVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICB7aXNMb2FkaW5nICYmIChcbiAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LXN0YXJ0XCI+XG4gICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctY2FyZCBib3JkZXIgcC0zIHJvdW5kZWQtbGcgdGV4dC1zbSBzaGFkb3ctc21cIj5cbiAgICAgICAgICAgICAgICAgICB7dChcImFpLnRoaW5raW5nXCIpfVxuICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDxkaXYgcmVmPXtzY3JvbGxSZWZ9IC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvU2Nyb2xsQXJlYT5cbiAgICAgICAgXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHQtNCBtdC0yIGZsZXggZ2FwLTJcIj5cbiAgICAgICAgICA8VGV4dGFyZWEgXG4gICAgICAgICAgICB2YWx1ZT17aW5wdXR9XG4gICAgICAgICAgICBvbkNoYW5nZT17KGU6IGFueSkgPT4gc2V0SW5wdXQoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgb25LZXlEb3duPXsoZTogYW55KSA9PiBlLmtleSA9PT0gXCJFbnRlclwiICYmICFlLnNoaWZ0S2V5ICYmIGhhbmRsZVNlbmQoKX1cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KFwiYWkucGxhY2Vob2xkZXJcIil9XG4gICAgICAgICAgICBkaXNhYmxlZD17aXNMb2FkaW5nfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC0xXCJcbiAgICAgICAgICAvPlxuICAgICAgICAgIDxCdXR0b24gb25DbGljaz17aGFuZGxlU2VuZH0gZGlzYWJsZWQ9e2lzTG9hZGluZ30+XG4gICAgICAgICAgICA8U2VuZCBjbGFzc05hbWU9XCJoLTQgdy00XCIgLz5cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0NhcmQ+XG4gICAgPC9kaXY+XG4gICk7XG59Il0sImZpbGUiOiJEOi/moYzpnaLnq6/lupTnlKhwbHVzL2FwcC9zcmMvcGFnZXMvQWlBZ2VudC50c3gifQ==